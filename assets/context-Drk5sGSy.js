import{c as i,o as I,l as oe,d as J,p as ae,R as F,q as Re,a9 as Ae,n as ve,x as j,_ as G,E as Le}from"./index-BpbnlELu.js";import{e as pe}from"./index-C2H-i-4x.js";var _e=i.forwardRef(function(e,r){var l=e.prefixCls,f=e.style,c=e.className,u=e.duration,y=u===void 0?4.5:u,L=e.eventKey,R=e.content,A=e.closable,b=e.closeIcon,P=b===void 0?"x":b,d=e.props,C=e.onClick,v=e.onNoticeClose,p=e.times,h=e.hovering,m=i.useState(!1),_=I(m,2),E=_[0],k=_[1],N=h||E,x=function(){v(L)},s=function(t){(t.key==="Enter"||t.code==="Enter"||t.keyCode===pe.ENTER)&&x()};i.useEffect(function(){if(!N&&y>0){var n=setTimeout(function(){x()},y*1e3);return function(){clearTimeout(n)}}},[y,N,p]);var o="".concat(l,"-notice");return i.createElement("div",oe({},d,{ref:r,className:J(o,c,ae({},"".concat(o,"-closable"),A)),style:f,onMouseEnter:function(t){var a;k(!0),d==null||(a=d.onMouseEnter)===null||a===void 0||a.call(d,t)},onMouseLeave:function(t){var a;k(!1),d==null||(a=d.onMouseLeave)===null||a===void 0||a.call(d,t)},onClick:C}),i.createElement("div",{className:"".concat(o,"-content")},R),A&&i.createElement("a",{tabIndex:0,className:"".concat(o,"-close"),onKeyDown:s,onClick:function(t){t.preventDefault(),t.stopPropagation(),x()}},P))}),de=F.createContext({}),Ke=function(r){var l=r.children,f=r.classNames;return F.createElement(de.Provider,{value:{classNames:f}},l)},ce=8,le=3,ue=16,Me=function(r){var l={offset:ce,threshold:le,gap:ue};if(r&&Re(r)==="object"){var f,c,u;l.offset=(f=r.offset)!==null&&f!==void 0?f:ce,l.threshold=(c=r.threshold)!==null&&c!==void 0?c:le,l.gap=(u=r.gap)!==null&&u!==void 0?u:ue}return[!!r,l]},be=["className","style","classNames","styles"],Pe=function(r){var l,f=r.configList,c=r.placement,u=r.prefixCls,y=r.className,L=r.style,R=r.motion,A=r.onAllNoticeRemoved,b=r.onNoticeClose,P=r.stack,d=i.useContext(de),C=d.classNames,v=i.useRef({}),p=i.useState(null),h=I(p,2),m=h[0],_=h[1],E=i.useState([]),k=I(E,2),N=k[0],x=k[1],s=f.map(function(g){return{config:g,key:String(g.key)}}),o=Me(P),n=I(o,2),t=n[0],a=n[1],S=a.offset,H=a.threshold,K=a.gap,D=t&&(N.length>0||s.length<=H),me=typeof R=="function"?R(c):R;return i.useEffect(function(){t&&N.length>1&&x(function(g){return g.filter(function(w){return s.some(function(U){var V=U.key;return w===V})})})},[N,s,t]),i.useEffect(function(){var g;if(t&&v.current[(g=s[s.length-1])===null||g===void 0?void 0:g.key]){var w;_(v.current[(w=s[s.length-1])===null||w===void 0?void 0:w.key])}},[s,t]),F.createElement(Ae,oe({key:c,className:J(u,"".concat(u,"-").concat(c),C==null?void 0:C.list,y,(l={},ae(l,"".concat(u,"-stack"),!!t),ae(l,"".concat(u,"-stack-expanded"),D),l)),style:L,keys:s,motionAppear:!0},me,{onAllRemoved:function(){A(c)}}),function(g,w){var U=g.config,V=g.className,ye=g.style,Ce=g.index,re=U,X=re.key,Ne=re.times,M=String(X),W=U,ge=W.className,he=W.style,q=W.classNames,Q=W.styles,ke=ve(W,be),Y=s.findIndex(function(B){return B.key===M}),z={};if(t){var O=s.length-1-(Y>-1?Y:Ce-1),ie=c==="top"||c==="bottom"?"-50%":"0";if(O>0){var Z,$,ee;z.height=D?(Z=v.current[M])===null||Z===void 0?void 0:Z.offsetHeight:m==null?void 0:m.offsetHeight;for(var se=0,te=0;te<O;te++){var ne;se+=((ne=v.current[s[s.length-1-te].key])===null||ne===void 0?void 0:ne.offsetHeight)+K}var xe=(D?se:O*S)*(c.startsWith("top")?1:-1),Ee=!D&&m!==null&&m!==void 0&&m.offsetWidth&&($=v.current[M])!==null&&$!==void 0&&$.offsetWidth?((m==null?void 0:m.offsetWidth)-S*2*(O<3?O:3))/((ee=v.current[M])===null||ee===void 0?void 0:ee.offsetWidth):1;z.transform="translate3d(".concat(ie,", ").concat(xe,"px, 0) scaleX(").concat(Ee,")")}else z.transform="translate3d(".concat(ie,", 0, 0)")}return F.createElement("div",{ref:w,className:J("".concat(u,"-notice-wrapper"),V,q==null?void 0:q.wrapper),style:j(j(j({},ye),z),Q==null?void 0:Q.wrapper),onMouseEnter:function(){return x(function(T){return T.includes(M)?T:[].concat(G(T),[M])})},onMouseLeave:function(){return x(function(T){return T.filter(function(Se){return Se!==M})})}},F.createElement(_e,oe({},ke,{ref:function(T){Y>-1?v.current[M]=T:delete v.current[M]},prefixCls:u,classNames:q,styles:Q,className:J(ge,C==null?void 0:C.notice),style:he,times:Ne,key:X,eventKey:X,onNoticeClose:b,hovering:t&&N.length>0})))})},He=i.forwardRef(function(e,r){var l=e.prefixCls,f=l===void 0?"rc-notification":l,c=e.container,u=e.motion,y=e.maxCount,L=e.className,R=e.style,A=e.onAllRemoved,b=e.stack,P=e.renderNotifications,d=i.useState([]),C=I(d,2),v=C[0],p=C[1],h=function(n){var t,a=v.find(function(S){return S.key===n});a==null||(t=a.onClose)===null||t===void 0||t.call(a),p(function(S){return S.filter(function(H){return H.key!==n})})};i.useImperativeHandle(r,function(){return{open:function(n){p(function(t){var a=G(t),S=a.findIndex(function(D){return D.key===n.key}),H=j({},n);if(S>=0){var K;H.times=(((K=t[S])===null||K===void 0?void 0:K.times)||0)+1,a[S]=H}else H.times=0,a.push(H);return y>0&&a.length>y&&(a=a.slice(-y)),a})},close:function(n){h(n)},destroy:function(){p([])}}});var m=i.useState({}),_=I(m,2),E=_[0],k=_[1];i.useEffect(function(){var o={};v.forEach(function(n){var t=n.placement,a=t===void 0?"topRight":t;a&&(o[a]=o[a]||[],o[a].push(n))}),Object.keys(E).forEach(function(n){o[n]=o[n]||[]}),k(o)},[v]);var N=function(n){k(function(t){var a=j({},t),S=a[n]||[];return S.length||delete a[n],a})},x=i.useRef(!1);if(i.useEffect(function(){Object.keys(E).length>0?x.current=!0:x.current&&(A==null||A(),x.current=!1)},[E]),!c)return null;var s=Object.keys(E);return Le.createPortal(i.createElement(i.Fragment,null,s.map(function(o){var n=E[o],t=i.createElement(Pe,{key:o,configList:n,placement:o,prefixCls:f,className:L==null?void 0:L(o),style:R==null?void 0:R(o),motion:u,onNoticeClose:h,onAllNoticeRemoved:N,stack:b});return P?P(t,{prefixCls:f,key:o}):t})),c)}),Ie=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],we=function(){return document.body},fe=0;function Te(){for(var e={},r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];return l.forEach(function(c){c&&Object.keys(c).forEach(function(u){var y=c[u];y!==void 0&&(e[u]=y)})}),e}function We(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.getContainer,l=r===void 0?we:r,f=e.motion,c=e.prefixCls,u=e.maxCount,y=e.className,L=e.style,R=e.onAllRemoved,A=e.stack,b=e.renderNotifications,P=ve(e,Ie),d=i.useState(),C=I(d,2),v=C[0],p=C[1],h=i.useRef(),m=i.createElement(He,{container:v,ref:h,prefixCls:c,motion:f,maxCount:u,className:y,style:L,onAllRemoved:R,stack:A,renderNotifications:b}),_=i.useState([]),E=I(_,2),k=E[0],N=E[1],x=i.useMemo(function(){return{open:function(o){var n=Te(P,o);(n.key===null||n.key===void 0)&&(n.key="rc-notification-".concat(fe),fe+=1),N(function(t){return[].concat(G(t),[{type:"open",config:n}])})},close:function(o){N(function(n){return[].concat(G(n),[{type:"close",key:o}])})},destroy:function(){N(function(o){return[].concat(G(o),[{type:"destroy"}])})}}},[]);return i.useEffect(function(){p(l())}),i.useEffect(function(){h.current&&k.length&&(k.forEach(function(s){switch(s.type){case"open":h.current.open(s.config);break;case"close":h.current.close(s.key);break;case"destroy":h.current.destroy();break}}),N(function(s){return s.filter(function(o){return!k.includes(o)})}))},[k]),[x,m]}const Oe=F.createContext({});export{Oe as A,_e as N,Ke as a,We as u};
