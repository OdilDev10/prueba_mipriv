import{j as e,u as F,a as I,c as P,a1 as S,a2 as c,a3 as b,a4 as k}from"./index-BpbnlELu.js";import{F as g}from"./index-CI73He22.js";import{C as A}from"./CustomButton-BWn0J7hp.js";import{a as L,S as C,L as T}from"./SwitchDarkMode-lmGQgvQJ.js";import{T as z}from"./Title-gg-o8yR0.js";import{A as p}from"./APPTEXT-DdBB-egC.js";import{F as m}from"./index-YdkwjpWn.js";import{R as d,C as u}from"./row-ByxdZ40K.js";import{I as h}from"./index-xFxyGTHE.js";import{s as l}from"./index-BgqKPYb3.js";import"./index-B2ImQXrH.js";import"./index-C2H-i-4x.js";import"./reactNode-YZyB0fSW.js";import"./index-D7j2smoz.js";import"./CheckOutlined-D194alxk.js";import"./SearchOutlined-qRc0Biuc.js";import"./responsiveObserver-BAaQWhiZ.js";import"./EyeOutlined-zNgE7p6U.js";import"./context-Drk5sGSy.js";const G=({onClick:i})=>e.jsx("div",{children:e.jsx("button",{type:"button",className:"login-with-google-btn",onClick:i,style:{cursor:"pointer"},children:"Sign in with Google"})}),Z=()=>{const[i]=m.useForm(),{toggleDarkMode:x,locale:f}=F(),n=I(),[j,y]=P.useState({}),t=p[f.locale]||p.es,w=async()=>{var r;try{const o=i.getFieldsValue(),s=await S(c,o.email,o.password),a=await s.user.getIdToken();a&&(localStorage.setItem("token_mipriv",a),localStorage.setItem("name_mipriv",(((r=s==null?void 0:s.user)==null?void 0:r.email)||"").split("@")[0]),l.success("Login successful"),n("/dashboard"))}catch(o){l.error(`Login error: ${o}`),console.error("Error en onFinish:",o)}},v=async()=>{var r;try{const o=new b,s=await k(c,o);y(s.user);const a=await s.user.getIdToken();return a&&(localStorage.setItem("token_mipriv",a),localStorage.setItem("name_mipriv",(((r=s==null?void 0:s.user)==null?void 0:r.displayName)||"").split(" ")[0]),localStorage.setItem("photo_mipriv",s.user.photoURL||""),l.success("Login successful"),n("/dashboard")),"Google login failed: idToken not available"}catch(o){return l.error(`Login error: ${o}`),console.error("Google login error:",o),`Google login failed: ${o}`}};return console.log(j),e.jsxs("div",{style:{},children:[e.jsxs(d,{justify:"center",style:{gap:"10px",alignItems:"center"},children:[e.jsx(L,{handleDarkMode:x}),e.jsx(C,{})]}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(z,{title:t.loginPage.loginButton,fontSize:"2rem"})}),e.jsxs(m,{form:i,children:[e.jsxs(d,{gutter:[16,16],style:{marginTop:"20px"},children:[e.jsx(u,{xs:24,sm:24,lg:12,children:e.jsxs(g,{name:"email",rules:[{type:"string",required:!0,message:t.subscriptions.modal.messages.emailInvalid}],children:[e.jsx("label",{htmlFor:"email",style:{color:"#5A607F",fontSize:"14px",fontWeight:"400"},children:t.loginPage.emailLabel}),e.jsx(h,{size:"large",style:{width:"100%"},placeholder:t.loginPage.emailPlaceholder,onChange:r=>i.setFieldsValue({email:r.target.value})})]})}),e.jsx(u,{xs:24,sm:24,lg:12,children:e.jsxs(g,{name:"password",rules:[{type:"string",required:!0,message:t.loginPage.passwordLabel}],children:[e.jsx("label",{htmlFor:"password",style:{color:"#5A607F",fontSize:"14px",fontWeight:"400"},children:t.loginPage.passwordLabel}),e.jsx(h,{type:"password",size:"large",style:{width:"100%"},placeholder:t.loginPage.passwordPlaceholder,onChange:r=>i.setFieldsValue({password:r.target.value})})]})})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(A,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px"},children:[e.jsx(T,{color:"",width:"30",height:"20"})," ",e.jsx("span",{style:{fontSize:".8rem"},children:t.loginPage.loginButton})]}),type:"primary",onClick:()=>{w()}}),e.jsx(G,{onClick:()=>{v()}})]}),e.jsxs("p",{style:{color:"#5A607F",fontSize:"16px",fontWeight:"400",marginTop:"10px",textAlign:"center"},children:[t.loginPage.haveAccount," ",e.jsx("span",{style:{color:"#1E5EFF",fontSize:"16px",fontWeight:"400",cursor:"pointer"},onClick:()=>{n("/register")},children:t.loginPage.signIn})]})]})]})};export{Z as default};
